name: Release

on:
  push:
    tags:
      - '*'

jobs:
  create_release:
    name: Create Release
    runs-on: macos-13
    steps:
      - uses: maxim-lobanov/setup-xcode@v1
        with:
          xcode-version: 15.0

      - uses: actions/checkout@v2

      - name: Create XCFramework
        uses: WhoopInc/swift-create-xcframework@1.0

      - name: Create release
        uses: ncipollo/release-action@v1
        with:
          artifact: '*.sha256, *.zip'
          allowUpdates: true
          draft: true
          generateReleaseNotes: true
          token: ${{ secrets.GITHUB_TOKEN }}
